# NFS-Gaze Testing (Rust Implementation)

This directory contains all testing documentation and test files for the Rust implementation of nfs-gaze.

## Contents

- **[TESTING.md](TESTING.md)** - Complete testing documentation for Rust implementation
- **cli_test.rs** - Integration tests for command-line interface
- **display_test.rs** - Integration tests for output formatting
- **stats_test.rs** - Integration tests for statistics parsing
- **coverage/** - Test coverage reports (generated by `make coverage`)

## Quick Start

### Run Tests

From the project root:

```bash
# Run all tests
cargo test

# Run tests with verbose output
cargo test -- --nocapture

# Run specific test module
cargo test parser::tests
cargo test cli_test

# Run with coverage
make coverage
```

### View Coverage

The latest coverage report is available in `coverage/README.md` after running `make coverage`.

To generate coverage report:

```bash
# From project root
make coverage

# Or manually with coverage tool
cargo test
./scripts/coverage.sh
```

### Test Structure

The Rust implementation includes comprehensive testing:

#### Unit Tests (Built-in)
Located within source files using `#[cfg(test)]`:
- `src/parser.rs` - 12 test functions for mountstats parsing
- `src/stats.rs` - 3 test functions for delta calculations
- `src/monitor.rs` - 4 test functions for monitoring logic
- `src/display.rs` - 4 test functions for output formatting
- `src/cli.rs` - 4 test functions for argument parsing

#### Integration Tests
Located in `tests/` directory:
- `cli_test.rs` - 7 tests for end-to-end CLI functionality
- `display_test.rs` - 6 tests for output formatting scenarios
- `stats_test.rs` - 2 tests for statistics processing

## Test Coverage Summary

**Total: 39 test functions** across all modules

### Coverage by Module
- **Parser module**: Complete mountstats parsing, edge cases, error handling
- **Stats module**: Delta calculations, operation filtering
- **Monitor module**: Mount selection, signal handling setup
- **Display module**: Terminal output formatting, bandwidth display
- **CLI module**: Argument parsing, validation

### Test Categories
- **Unit tests** - Individual function testing
- **Integration tests** - Module interaction testing
- **Error handling** - Invalid input and edge case testing
- **Performance** - Large data set handling

## Coverage Goals (Achieved!)

- **Overall coverage**: High coverage across all modules
- **Critical Functions**: Complete coverage of parsing logic
- **Error Handling**: All error paths tested
- **Edge Cases**: Boundary conditions and invalid inputs

## Continuous Integration

For CI/CD pipelines, use:

```bash
cargo test        # Run all tests
cargo fmt --check # Check formatting
cargo clippy      # Run linter
make coverage     # Generate coverage report
```

## Migration from Go Tests

The Rust implementation maintains test coverage equivalence with the original Go version:

- All Go test cases have been ported to Rust
- Additional tests added for Rust-specific functionality
- Enhanced error handling testing with Result types
- More comprehensive edge case coverage

## More Information

See [TESTING.md](TESTING.md) for detailed testing procedures and guidelines.